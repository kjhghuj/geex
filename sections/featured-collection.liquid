{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Featured Collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 4,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Collection"
    }
  ]
}
{% endschema %}

<div class="max-w-7xl mx-auto px-4 pb-20 pt-10">
    <div class="flex items-center justify-between mb-10">
        <h3 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
           {{ section.settings.title }}
        </h3>
        <a href="{{ collections[section.settings.collection].url }}" class="text-sm font-medium text-sky-500 hover:text-sky-600 flex items-center gap-1 transition-colors">
            View All 
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </a>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 md:gap-8">
        {% assign limit = section.settings.products_to_show %}
        {% for product in collections[section.settings.collection].products limit: limit %}
            <div class="group bg-white rounded-2xl p-3 border border-gray-100 hover:border-sky-100 shadow-sm hover:shadow-xl hover:shadow-sky-50 transition-all duration-300 flex flex-col">
                <div class="relative aspect-square overflow-hidden rounded-xl bg-gray-50 cursor-pointer mb-3">
                    <a href="{{ product.url }}">
                        <div class="flex gap-1">
                            {% for i in (1..5) %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="#FACC15" stroke="#FACC15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                            {% endfor %}
                        </div>
                    </a>
                    <button 
                        class="absolute bottom-3 right-3 bg-white text-slate-900 p-2.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 translate-y-4 group-hover:translate-y-0 transition-all duration-300 hover:bg-sky-500 hover:text-white"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
                    </button>
                </div>
                <div class="flex flex-col flex-1 px-1">
                    <div class="text-xs font-medium text-sky-500 mb-1">{{ product.type }}</div>
                    <a href="{{ product.url }}" class="text-sm font-bold text-slate-900 mb-2 flex-1 group-hover:text-sky-600 transition-colors line-clamp-2 cursor-pointer leading-relaxed">
                        {{ product.title }}
                    </a>
                    <div class="flex items-center justify-between mt-auto">
                        <div class="text-base font-bold text-slate-900">{{ product.price | money }}</div>
                        <div class="flex gap-1">
                            {% for i in (1..5) %}
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="#FACC15" stroke="#FACC15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <p>Please select a collection in the theme editor.</p>
        {% endfor %}
    </div>
</div>